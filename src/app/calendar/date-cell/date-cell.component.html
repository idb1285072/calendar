<div class="date-cell p-1 h-100" [class.text-muted]="!day.inMonth">
  <div class="d-flex justify-content-between align-items-start mb-1">
    <small class="fw-bold">{{ day.date.getDate() }}</small>
    <small *ngIf="isToday" class="badge bg-primary">Today</small>
  </div>

  <div class="day-lines">
    <ng-container *ngFor="let _ of day.lines; let li = index">
      <div class="line-slot">
        <ng-container *ngIf="day.lines[li]; else emptySlot">
          <div
            class="activity-line text-white rounded-1"
            [ngClass]="{
              'bg-danger': day.lines[li]?.status === ActivityStatusEnum.Pending,
              'bg-warning':
                day.lines[li]?.status === ActivityStatusEnum.OnGoing,
              'bg-success':
                day.lines[li]?.status === ActivityStatusEnum.Complete,
              'border-start': showTitleFlags[li]
            }"
            title="{{ day.lines[li]?.title }}"
          >
            <span class="activity-title text-truncate">{{
              day.lines[li] && showTitleFlags[li]
                ? day.lines[li]?.title
                : "\u00A0"
            }}</span>
          </div>
        </ng-container>
        <ng-template #emptySlot>
          <div class="activity-line placeholder"></div>
        </ng-template>
      </div>
    </ng-container>

    <div *ngIf="day.hidden && day.hidden.length > 0" class="mt-1 text-center">
      <button class="btn btn-link btn-sm p-1" (click)="openModal()">
        +{{ day.hidden.length }} more
      </button>
    </div>
  </div>
</div>

<app-activities-modal
  *ngIf="showModal"
  [activities]="day.hidden"
  [date]="day.date"
  (close)="closeModal()"
></app-activities-modal>
