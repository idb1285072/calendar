<div class="date-cell p-1 h-100" [class.text-muted]="!day.inMonth">
  <div class="d-flex justify-content-between align-items-start mb-1">
    <small class="fw-bold" (click)="onClickDateArea()">{{
      day.date.getDate()
    }}</small>
    <small *ngIf="isToday()" class="badge bg-primary">Today</small>
  </div>

  <div class="day-lines">
    <ng-container *ngFor="let li of lineIndices">
      <div class="line-slot">
        <ng-container *ngIf="day.lines[li]; else emptySlot">
          <div
            class="activity-line text-white rounded-1"
            [ngClass]="{
              'bg-danger': day.lines[li]?.status === ActivityStatusEnum.Pending,
              'bg-warning':
                day.lines[li]?.status === ActivityStatusEnum.OnGoing,
              'bg-success':
                day.lines[li]?.status === ActivityStatusEnum.Complete
            }"
            title="{{ day.lines[li]?.title }}"
          >
            <span class="activity-title text-truncate">{{
              day.lines[li]?.title
            }}</span>
          </div>
        </ng-container>
        <ng-template #emptySlot>
          <div class="activity-line placeholder"></div>
        </ng-template>
      </div>
    </ng-container>

    <div *ngIf="day.hidden && day.hidden.length > 0" class="mt-1">
      <button class="btn btn-link btn-sm p-1" (click)="showMore = !showMore">
        +{{ day.hidden.length }} more
      </button>

      <div *ngIf="showMore" class="hidden-list mt-1">
        <div
          *ngFor="let h of day.hidden"
          class="activity-line small text-white rounded-1"
          [ngClass]="{
            'bg-danger': h.status === ActivityStatusEnum.Pending,
            'bg-warning': h.status === ActivityStatusEnum.OnGoing,
            'bg-success': h.status === ActivityStatusEnum.Complete
          }"
        >
          <span class="event-dot me-1"></span>
          {{ h.title }}
        </div>
      </div>
    </div>
  </div>
</div>
